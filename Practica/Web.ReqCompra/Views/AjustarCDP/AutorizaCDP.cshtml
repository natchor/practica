@{
    ViewData["Title"] = "Autorizar ajustes CDP";
}

<div class="tabcontent" id="contentAjusteCDP">
    <div class="row">
        <div class="col-sm-12">
            <div id="divUsuario"></div>
            <div class="tab-pane fade show active" id="solicitud" role="tabpanel" aria-labelledby="solicitud-tab">
                <div class="mt-3">
                    <table id="tblUsuario" class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>Nº Solicitud</th>
                                <th>Nombre de la Compra</th>
                                <th>Usuario solicitante</th>
                                <th>Ajusta CDP</th>
                                <th>Estado</th>
                                <th>Fase CDP</th>
                                @*<th>Monto ajustado</th>*@
                                <th>Ver</th>
                                <th>CDP</th>
                                <th>Acciones</th>


                            </tr>
                        </thead>
                        <tbody>

                            @foreach (SolicitudPorFinalizarModel solic in ViewBag.tablaPorAutorizarCDP)
                            {
                                <tr>
                                    <td>@solic.NroSolicitud</td>
                                    <td>@solic.NombreCompra </td>
                                    <td>@solic.NombreSolicitante</td>
                                    <td>@solic.AprobadorCDPStr</td> @*cambiar por ajusta CDP*@



                                    <td>@solic.EstadoStr</td>
                                    <td>@solic.FaseCDP</td>
                                    @*<td>@solic.AnalistaProcesoId</td>*@
                                    <!--<td></td>--> <!-- fecha de cuando todos ya aprobaron -->
                                    @*<td>@solic.monto</td>*@



                                    <td>

                                        <a target="_blank" class="btn btn-outline-primary" asp-controller="Solicitud" asp-action="Ver" asp-route-solicitudId=@solic.Id>
                                            <i class="far fa-eye"></i>
                                            @*<span id="cdpVerId">Ver</span>*@

                                        </a>
                                    </td>
                                    <td>
                                        <a target="_blank" class="btn btn-outline-success" id="btnCDP" data-fasecdp="@solic.FaseCDP" asp-controller="BackOffice" asp-action="CDP" asp-route-solicitudId=@solic.Id>
                                            @*<i class="far fa-eye"></i>*@
                                            @*<span id="cdpVerId">CDP</span>*@
                                            <i class="fas fa-file-contract"></i>
                                        </a>
                                    </td>
                                    <td solicitudId="@solic.Id">
                                        <button class="btn btn-outline-warning AutorizaCDP"><i class="fas fa-check-circle"></i></button>
                                         <button class="btn btn-outline-danger RechazaCDP"><i class="fas fa-times-circle"></i></button>
                                    </td>
                                </tr>

                            }


                        </tbody>
                    </table>
                </div>


            </div>


        </div>
    </div>
</div>


<div id="modals"></div>

@section Scripts{
    <script>

        Index = function () {

            $(document).ready(function () {
                $('#tblUsuario').DataTable();
                $('#divIndicadoresEconomicos').css('display', 'none');
                $('#divIndicadoresEconomicos').hide();
            });

            return {
                
                urlAprobacionAjusteCDP: "@Url.Action(nameof(AjustarCDPController.AutorizaCDP), "AjustarCDP")",
                urlRechazarAjusteCDP: "@Url.Action(nameof(AjustarCDPController.RechazarCDP), "AjustarCDP")",




            }


        }();

    </script>

    <script type="text/javascript" src="~/js/BackOffice/_AjustarCDP.js" asp-append-version="true"></script>

}

